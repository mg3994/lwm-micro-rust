# TURN server configuration for LinkWithMentor

# Listening port for TURN/STUN
listening-port=3478

# Alternative listening port for TLS/DTLS
tls-listening-port=5349

# Listening IP addresses
listening-ip=0.0.0.0

# External IP address (will be auto-detected in Docker)
# external-ip=YOUR_PUBLIC_IP

# TURN server realm
realm=linkwithmentor.com

# Server name
server-name=linkwithmentor-turn

# Authentication
# Use long-term credentials
lt-cred-mech

# User credentials (for development - use database in production)
user=linkwithmentor:coturn_password

# Static auth secret (recommended for production)
static-auth-secret=linkwithmentor-static-secret-change-in-production

# Total quota (bytes per allocation)
total-quota=100

# User quota (bytes per user)
user-quota=50

# Max number of relay endpoints per allocation
max-port=65535
min-port=49152

# Verbose logging
verbose

# Log file
log-file=/var/log/turnserver.log

# Enable fingerprinting
fingerprint

# Disable multicast addresses
no-multicast-peers

# Disable loopback addresses
no-loopback-peers

# Enable mobility
mobility

# Disable UDP relay endpoints
# no-udp-relay

# Disable TCP relay endpoints
# no-tcp-relay

# SSL/TLS configuration (optional)
# cert=/etc/ssl/certs/turn_server_cert.pem
# pkey=/etc/ssl/private/turn_server_pkey.pem

# Database configuration (for production)
# psql-userdb="host=postgres dbname=linkwithmentor user=linkwithmentor_user password=linkwithmentor_password"

# Redis configuration (for clustering)
# redis-userdb="ip=redis port=6379 dbname=2 password= connect_timeout=30"

# Bandwidth settings
# max-bps=1000000

# Session timeout
stale-nonce=600

# CLI interface
cli-port=5766
cli-ip=127.0.0.1
cli-password=linkwithmentor-cli-password

# Prometheus metrics (if supported)
# prometheus

# Deny access to private IP ranges (security)
denied-peer-ip=10.0.0.0-10.255.255.255
denied-peer-ip=192.168.0.0-192.168.255.255
denied-peer-ip=172.16.0.0-172.31.255.255
denied-peer-ip=127.0.0.0-127.255.255.255
denied-peer-ip=169.254.0.0-169.254.255.255

# Allow access to specific ranges if needed
# allowed-peer-ip=192.168.1.0-192.168.1.255

# Process settings
proc-user=turnserver
proc-group=turnserver

# Disable software attributes in TURN messages
no-software-attribute

# Enable origin check
check-origin-consistency

# Secure configuration
secure-stun

# Production settings (uncomment for production)
# no-stdout-log
# syslog
# simple-log